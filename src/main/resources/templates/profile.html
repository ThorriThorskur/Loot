<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>User Profile</title>
</head>
<body>
<h1>User Profile</h1>

<div th:if="${user != null}">
  <p>Username: <span th:text="${user.username}"></span></p>
  <p>ID: <span th:text="${user.id}"></span></p>

  <!-- Profile Picture Display -->
  <div th:if="${profilePictureBase64 != null}">
    <img th:src="'data:image/jpeg;base64,' + ${profilePictureBase64}" alt="Profile Picture" width="150" height="150" />
    <!-- Remove Profile Picture Button -->
    <form th:action="@{/profile/remove}" method="post">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <button type="submit">Remove Profile Picture</button>
    </form>
  </div>
  <div th:if="${profilePictureBase64 == null}">
    <p>No profile picture uploaded.</p>
  </div>

  <!-- Form to Upload Profile Picture -->
  <form th:action="@{/profile/upload}" method="post" enctype="multipart/form-data">
    <input type="file" name="profilePicture" accept="image/*" required />
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <button type="submit">Upload Profile Picture</button>
  </form>

  <p><a th:href="@{/user/{userId}/inventory(userId=${user.id})}" class="button">Collection</a></p>
  <p><a th:href="@{/}">Back to Home</a></p>
</div>

<div th:if="${user == null}">
  <p>No user information available.</p>
</div>
</body>
</html>
